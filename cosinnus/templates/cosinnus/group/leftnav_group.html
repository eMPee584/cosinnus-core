{% load i18n cosinnus_tags %}

{% comment %} {{current_page}} is one of: editgroup, groupdetails {% endcomment %}

{% if current_page == "editgroup" %}
    {% captureas is_editgroup %}True{% endcaptureas %}
{% elif current_page == "groupdetails" %}
    {% captureas is_groupdetails %}True{% endcaptureas %}
{% endif %}

{% if user|has_write_access:object %}
	{% captureas href %}{% url 'cosinnus:group-edit' group=group.slug %}{% endcaptureas %}
	{% captureas label %}{% trans "Edit Group" %}{% endcaptureas %}
	{% include "cosinnus/leftnav_button.html" with active=is_editgroup extra_classes="fine-space" icon="fa-info-circle" label=label href=href  %}
{% endif %}

{% captureas href %}{% url 'cosinnus:group-detail' group=group.slug %}{% endcaptureas %}
{% captureas label %}{% trans "Members" %}{% endcaptureas %}
{% include "cosinnus/leftnav_button.html" with active=is_groupdetails extra_classes="large-space" icon="fa-users" label=label href=href  %}

{% if user.pk in object.members or user.pk in object.admins %}
    {% captureas label %}{% trans "Leave Group" %}{% endcaptureas %}
    {% captureas extra_atts %}data-toggle="modal" data-target="#leave_join_group_modal"{% endcaptureas %}
    {% include "cosinnus/leftnav_button.html" with extra_classes="regular-space" icon="fa-sign-out" label=label href="#"  %}
    
    {% captureas label %}{% blocktrans with title=object.name %}Do you really want to leave group „{{ title }}“?{% endblocktrans %}{% endcaptureas %}
    {% captureas title %}{% trans "Leave Group" %}{% endcaptureas %}
    {% captureas action %}{% url 'cosinnus:group-user-leave' group=group.slug %}{% endcaptureas %}
    
    {% include "cosinnus/modal_box.html" with id="leave_join_group_modal" label=label title=title form_action=action %}
{% elif user.pk in group.pendings %}
    {% captureas label %}{% trans "Withdraw Request" %}{% endcaptureas %}
    {% captureas extra_atts %}data-toggle="modal" data-target="#leave_join_group_modal"{% endcaptureas %}
    {% include "cosinnus/leftnav_button.html" with extra_classes="regular-space" icon="fa-sign-out" label=label href="#"  %}
    
    {% captureas label %}{% blocktrans with title=group.name %}Do you really want to withdraw your join request to group „{{ title }}“?{% endblocktrans %}{% endcaptureas %}
    {% captureas title %}{% trans "Withdraw Join Request" %}{% endcaptureas %}
    {% captureas action %}{% url 'cosinnus:group-user-withdraw' group=group.slug %}{% endcaptureas %}
    
    {% include "cosinnus/modal_box.html" with id="leave_join_group_modal" label=label title=title form_action=action %}
{% else %}
    {% captureas label %}{% trans "Join Group" %}{% endcaptureas %}
    {% captureas extra_atts %}data-toggle="modal" data-target="#leave_join_group_modal"{% endcaptureas %}
    {% include "cosinnus/leftnav_button.html" with extra_classes="regular-space" icon="fa-sign-in" label=label href="#"  %}
    
    {% captureas label %}{% blocktrans with title=group.name %}Do you wish to request to join group „{{ title }}“?{% endblocktrans %}{% endcaptureas %}
    {% captureas title %}{% trans "Join Group" %}{% endcaptureas %}
    {% captureas action %}{% url 'cosinnus:group-user-join' group=group.slug %}{% endcaptureas %}
    
    {% include "cosinnus/modal_box.html" with id="leave_join_group_modal" label=label title=title form_action=action %}
{% endif %}

                