{% extends "cosinnus/base.html" %}
{% load i18n static cosinnus_tags widget_tweaks %}

{% block page_title %}
	{% if object %}
	   {% blocktrans with group_name=object.name %}Edit group “{{ group_name }}”{% endblocktrans %}
	{% else %}
	   {% if group_model == "CosinnusSociety" %}{% trans "Create Society" %}{% else %}{% trans "Create Group" %}{% endif %}
    {% endif %}
{% endblock %}


{% block leftnav %}
    {% if object %}
        {% captureas current_page %}editgroup{% endcaptureas %}
        {% include "cosinnus/group/leftnav_group.html"  with current_page=current_page %}
    {% else %}
        {% captureas current_page %}{% if group_model == "CosinnusSociety" %}addsociety{% else %}addgroup{% endif %}{% endcaptureas %}
        {% include "cosinnus/group/leftnav_all_groups.html"  with current_page=current_page %}
    {% endif %}
{% endblock leftnav %}


{% block breadcrumb %}
        {{ block.super }}
        {% if object %}
            <li class="active">{% if group_model == "CosinnusSociety" %}{% trans "Edit Society" %}{% else %}{% trans "Edit Group" %}{% endif %}</li>
        {% else %}
            <li class="active">{% if group_model == "CosinnusSociety" %}{% trans "Create Society" %}{% else %}{% trans "Create Group" %}{% endif %}</li>
        {% endif %}
{% endblock %}


{% block content %}
    
    <form action="" method="post" enctype="multipart/form-data" class="form-horizontal" role="form">
    {% csrf_token %}
    {{ form.forms.obj.media }}
    
        <!-- a box with semi transparent background -->
        <div class="content-box">
	        {{ form.forms.obj.non_field_errors }}
	        {{ form.forms.media_tag.non_field_errors }}
	        
		    <div type="button" class="btn btn-default w100 large-space">
		        <ul class="media-list">
		            <li class="media">
		                <a class="pull-left btn-emphasized" href="#">
		                    {% if object %}
		                       <i class="fa fa-users"></i>
		                    {% else %}
		                       <i class="fa fa-plus"></i>
		                    {% endif %}
		                </a>
		                <div class="media-body media-body-form-control">
		                    {{ form.forms.obj.name.errors }}
	                        {% captureas placeholder %}{% if group_model == "CosinnusSociety" %}{% trans "Enter a name for the society." %}{% else %}{% trans "Enter a name for the group." %}{% endif %}{% endcaptureas %}
	                        {% render_field form.forms.obj.name class+="form-control" placeholder=placeholder %}
		                </div>
		            </li>
		        </ul>
		    </div>
		
		    <fieldset>
		        <legend>{% trans "Avatar" %}</legend>
		
		        <!-- On large screens the long explanation texts are on the right side next to the input elements -->
		        <div class="row">
		        
                    <div class="col-md-8">

                        <!-- image left, inputs right -->
                        <div class="row">
                            
                            {{ form.forms.obj.avatar.errors }}
                        
                            <div class="col-sm-4 regular-space">
                                {% captureas preview_style %}width:{{SETTINGS.AWESOME_AVATAR.width}}px;height:{{SETTINGS.AWESOME_AVATAR.height}}px{% endcaptureas %}
                                <div id="id_avatar-preview" class="awesome-avatar-preview" style="{{ preview_style }}">
                                    {% include "cosinnus/group/group_avatar_image.html" with group=object extra_style=preview_style %}
                                </div>
                                <div id="avatar_deletion_notice" class="hidden"><p>{% trans "Avatar will be deleted once you save." %}</p></div>
                            </div>


                            <div class="col-sm-8 regular-space">

                                <div type="button" class="btn btn-default w100 regular-space">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a class="pull-left" href="#">
                                                <i class="fa fa-file-image-o"></i>
                                            </a>
                                            <div class="media-body">
                                                {{ form.forms.obj.avatar }}
                                            </div>
                                        </li>
                                    </ul>
                                </div>

                                <div type="button" class="btn btn-default w100">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a class="pull-left" href="#" onclick="$('#avatar_deletion_notice').toggleClass('hidden');">
                                                <i id="avatar_clear_checkbox" class="fa fa-square-o"></i>
                                                <input type="hidden" name="avatar_clear" >
                                            </a>
                                            <div class="media-body">
                                                <a href="#" onclick="$('#avatar_clear_checkbox').click();">{% trans "Delete" %}</a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div><!-- col -->
                        </div><!-- row -->
                    </div><!-- col -->
		        
		            <!-- explanation text -->
		            <div class="col-md-4">
		                <p class="transparent">{% trans "A picture for better recognition." %}</p>
		            </div>
		        </div><!-- row -->
				
				{{ form.forms.obj.wallpaper.errors }}
				<div class="row">
                 	<div class="col-md-8 regular-space">
						{% if object.wallpaper %}
						{% trans "Currently" %}: <a href="{{ object.wallpaper.url }}">{{ object.wallpaper }}</a> 
						{% endif %}
						<input id="wallpaper-clear_id" name="file-clear" type="checkbox"> 
						<label for="wallpaper-clear_id">{% trans "Reset" %}</label><br>
						{% trans "Change" %}: 
						<input class="form-control" id="fileToUpload" name="wallpaper" placeholder="{% trans "Upload an image." %}" type="file">
					</div>
             	</div>
		    </fieldset>
		
		
		    <fieldset>
		        <legend>{% trans "Description and Infos" %}</legend>
		
		        <!-- On large screens the long explanation texts are on the right side next to the input elements -->
		        <div class="row">
		            <div class="col-md-8 regular-space">
		                
                        <label>
                        	{% if group_model == "CosinnusSociety" %}{% trans "Describe the society in a few sentences." %}{% else %}{% trans "Describe the group in a few sentences." %}{% endif %}
                        	{% trans "This is an internal description for the members." %}
                        </label>
                        {{ form.forms.obj.description.errors }}
                        <div type="button" class="btn btn-default w100 regular-space">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <div class="media-body">
                                        {% render_field form.forms.obj.description  %}
                                    </div>
                                </li>
                            </ul>
                        </div>
                        
                        <label>
                        	{% if group_model == "CosinnusSociety" %}{% trans "Describe the society in a few sentences." %}{% else %}{% trans "Describe the group in a few sentences." %}{% endif %}
                        	{% trans "This is a public description that can be seen by anyone and will be shown on the microsite." %}
                        </label>
                        {{ form.forms.obj.description_long.errors }}
                        <div type="button" class="btn btn-default w100 regular-space">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <div class="media-body">
                                        {% render_field form.forms.obj.description_long  %}
                                    </div>
                                </li>
                            </ul>
                        </div>
                        
                        <label>
                        	{% trans "Contact info. How you can be reached, addresses, social media, etc..." %}
                        	{% trans "This is a public description that can be seen by anyone and will be shown on the microsite." %}
                        </label>
                        {{ form.forms.obj.contact_info.errors }}
                        <div type="button" class="btn btn-default w100 regular-space">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <div class="media-body">
                                        {% render_field form.forms.obj.contact_info  %}
                                    </div>
                                </li>
                            </ul>
                        </div>
                        
                        <label>{% trans "Website" %}</label>
                        {{ form.forms.obj.website.errors }}
                        <div type="button" class="btn btn-default w100 regular-space">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-chain"></i>
                                    </a>
                                    <div class="media-body media-body-form-control">
                                        {% captureas placeholder %}{% trans "Website" %}{% endcaptureas %}
                                        {% render_field form.forms.obj.website class+="form-control" placeholder=placeholder %}
                                    </div>
                                </li>
                            </ul>
                        </div>
		                
                        {% include "cosinnus/media_tags_group.html" %} 
                        
                        {% if form.forms.obj.parent %}
                        <label>{% trans "Which Society does the group belong to?" %}</label>
                        <div type="button" class="btn btn-default w100">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-globe"></i>
                                    </a>
                                    <div class="media-body media-body-form-control">
                                        {{ form.forms.obj.parent.errors }}
						                {% captureas placeholder %}{% trans "Select Society" %}{% endcaptureas %}
						                {% render_field form.forms.obj.parent class+="form-control w100" placeholder=placeholder %}
                                    </div>
                                </li>
                            </ul>
                        </div>
                        {% endif %}
		
		                <label>{% trans "Privacy" %}</label>
		                <div type="button" class="btn btn-default w100">
		                    <ul class="media-list">
		                        <li class="media">
		                            <a class="pull-left" href="#">
		                                <i class="fa fa-globe"></i>
		                            </a>
		                            <div class="media-body media-body-form-control">
		                                <select name="public" class="form-control">
		                                    <option default value="false">{% trans "Group/Project members only" %}</option>
		                                    <option {% if object and object.public %}selected{% endif %} value="true">{% trans "Public (visible without login)" %}</option>
		                                </select>
		                            </div>
		                        </li>
		                    </ul>
		                </div>
		            
		                <label>{% trans "Which apps should be activated?" %}</label>
		                <div class="regular-space">
		                    <ol class="input-area">
		                        <li class= "w100" style="white-space:normal;">
		                            {% for app_option in deactivated_app_selection %}
		                                {% captureas cosinnus_css_class %}{% if app_option.app == 'todo' %}app-todos{% elif app_option.app == 'note' %}app-main{% elif app_option.app == 'file' %}app-files{% elif app_option.app == 'event' %}app-calendar{% elif app_option.app %}app-{{ app_option.app }}{% else %}app-main{% endif %}{% endcaptureas %}
		                                <span class="pull-left inline-list nowrap {{ cosinnus_css_class }}">
		                                    <a class="app-background small-padding"><input id="checkbox_{{ app_option.app_name }}" type="checkbox" name="deactivated_apps" {% if app_option.checked == True %}checked="true"{% endif %} value="{{ app_option.app_name }}" /></a
		                                    ><span class="app-background-light dark-color small-padding" onclick="$('#checkbox_{{ app_option.app_name }}').prop('checked', !($('#checkbox_{{ app_option.app_name }}').prop('checked')));">
		                                        {{ app_option.label }}
		                                    </span>
		                                </span>
		                            {% endfor %}
		                        </li>
		                    </ol>
		                </div>
		            
		            
		            </div><!-- col -->
		            <div class="col-md-4">
		                <p class="transparent"><strong>{% trans "Description" %}</strong></p>
		                <p class="transparent">{% trans "Describe your activities and goals" %}</p>
		            </div><!-- col -->
		        </div><!-- row -->
		        
	        </fieldset>
	    </div>
	    
	    <button type="submit" class="btn btn-emphasized">
	        <ul class="media-list">
	            <li class="media">
	                <a class="pull-left" href="#">
	                    <i class="fa fa-check"></i>
	                </a>
	                <div class="media-body">
                        {% trans "Save" %}
	                </div>
	            </li>
	        </ul>
	    </button>
    
    
    </form>
    

{% endblock %}



