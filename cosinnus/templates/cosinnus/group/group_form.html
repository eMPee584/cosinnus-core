{% extends "cosinnus/base.html" %}
{% load i18n static cosinnus_tags widget_tweaks %}

{% block page_title %}
	{% if object %}
	   {% blocktrans with group_name=object.name %}Edit group “{{ group_name }}”{% endblocktrans %}
	{% else %}
	   {% trans "Create Group" %}
    {% endif %}
{% endblock %}


{% block leftnav %}
    {% if object %}
        {% captureas current_page %}editgroup{% endcaptureas %}
        {% include "cosinnus/group/leftnav_group.html"  with current_page=current_page %}
    {% else %}
        {% captureas current_page %}addgroup{% endcaptureas %}
        {% include "cosinnus/group/leftnav_all_groups.html"  with current_page=current_page %}
    {% endif %}
{% endblock leftnav %}


{% block breadcrumb %}
        {{ block.super }}
        {% if object %}
            <li class="active">{% trans "Edit Group" %}</li>
        {% else %}
            <li class="active">{% trans "Create Group" %}</li>
        {% endif %}
{% endblock %}


{% block content %}
    
    <form action="" method="post" enctype="multipart/form-data" class="form-horizontal" role="form">
    {% csrf_token %}
    {{ form.forms.obj.media }}
    
        <!-- a box with semi transparent background -->
        <div class="content-box">
	        {{ form.forms.obj.non_field_errors }}
	        {{ form.forms.media_tag.non_field_errors }}
		    
		    <div type="button" class="btn btn-default w100 large-space">
		        <ul class="media-list">
		            <li class="media">
		                <a class="pull-left btn-emphasized" href="#">
		                    {% if object %}
		                       <i class="fa fa-users"></i>
		                    {% else %}
		                       <i class="fa fa-plus"></i>
		                    {% endif %}
		                </a>
		                <div class="media-body">
		                    {{ form.forms.obj.name.errors }}
	                        {% captureas placeholder %}{% trans "Gib den Namen für die Gruppe ein." %}{% endcaptureas %}
	                        {% render_field form.forms.obj.name class+="form-control" placeholder=placeholder %}
		                </div>
		            </li>
		        </ul>
		    </div>
		
		    <fieldset>
		        <legend>{% trans "Gruppenbild" %}</legend>
		
		        <!-- On large screens the long explanation texts are on the right side next to the input elements -->
		        <div class="row">
		        
                    <div class="col-md-8">

                        <!-- image left, inputs right -->
                        <div class="row">
                            
                            {{ form.forms.obj.avatar.errors }}
                        
                            <div class="col-sm-4 regular-space">
                                {% captureas preview_style %}width:{{SETTINGS.AWESOME_AVATAR.width}}px;height:{{SETTINGS.AWESOME_AVATAR.height}}px{% endcaptureas %}
                                <div id="id_avatar-preview" class="awesome-avatar-preview" style="{{ preview_style }}">
                                    {% include "cosinnus/group/group_avatar_image.html" with group=object extra_style=preview_style %}
                                </div>
                                <div id="avatar_deletion_notice" class="hidden"><p>{% trans "Gruppenbild wird beim Speichern der Gruppe gelöscht." %}</p></div>
                            </div>


                            <div class="col-sm-8 regular-space">

                                <div type="button" class="btn btn-default w100 regular-space">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a class="pull-left" href="#">
                                                <i class="fa fa-file-image-o"></i>
                                            </a>
                                            <div class="media-body">
                                                {{ form.forms.obj.avatar }}
                                            </div>
                                        </li>
                                    </ul>
                                </div>

                                <div type="button" class="btn btn-default w100">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a class="pull-left" href="#" onclick="$('#avatar_deletion_notice').toggleClass('hidden');">
                                                <i id="avatar_clear_checkbox" class="fa fa-square-o"></i>
                                                <input type="hidden" name="avatar_clear" >
                                            </a>
                                            <div class="media-body">
                                                <a href="#" onclick="$('#avatar_clear_checkbox').click();">{% trans "Löschen" %}</a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div><!-- col -->
                        </div><!-- row -->
                    </div><!-- col -->
		        
		            <!-- explanation text -->
		            <div class="col-md-4">
		                <p class="transparent">{% trans "Ein Bild hilft, die Gruppe in vielen Programmen schnell zu erkennen." %}</p>
		            </div>
		        </div><!-- row -->
		    </fieldset>
		
		
		    <fieldset>
		        <legend>{% trans "Über die Gruppe" %}</legend>
		
		        <!-- On large screens the long explanation texts are on the right side next to the input elements -->
		        <div class="row">
		            <div class="col-md-8 regular-space">
		                
                        <label>{% trans "Beschreibe die Gruppe in ein paar Sätzen." %}</label>
                        {{ form.forms.obj.description.errors }}
                        <div type="button" class="btn btn-default w100 regular-space">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <div class="media-body">
                                        {% render_field form.forms.obj.description  %}
                                    </div>
                                </li>
                            </ul>
                        </div>
		                
                        {% include "cosinnus/media_tags_group.html" %} 
                        
                        <label>{% trans "Welcher Organisation gehört die Gruppe an?" %}</label>
                        <div type="button" class="btn btn-default w100">
                            <ul class="media-list">
                                <li class="media">
                                    <a class="pull-left" href="#">
                                        <i class="fa fa-globe"></i>
                                    </a>
                                    <div class="media-body">
                                        {{ form.forms.obj.organisation.errors }}
						                {% captureas placeholder %}{% trans "Organisation auswählen" %}{% endcaptureas %}
						                {% render_field form.forms.obj.organisation class+="form-control w100" placeholder=placeholder %}
                                    </div>
                                </li>
                            </ul>
                        </div>
		
		                <label>{% trans "Wie öffentlich ist die Gruppe?" %}</label>
		                <div type="button" class="btn btn-default w100">
		                    <ul class="media-list">
		                        <li class="media">
		                            <a class="pull-left" href="#">
		                                <i class="fa fa-globe"></i>
		                            </a>
		                            <div class="media-body">
		                                <select name="public" class="form-control">
		                                    <option default value="false">{% trans "Members only" %}</option>
		                                    <option {% if object and object.public %}selected{% endif %} value="true">{% trans "Public" %}</option>
		                                </select>
		                            </div>
		                        </li>
		                    </ul>
		                </div>
		            
		            
		            
		            
		            </div><!-- col -->
		            <div class="col-md-4">
		                <p class="transparent"><strong>{% trans "Gruppe beschreiben" %}</strong></p>
		                <p class="transparent">{% trans "Beschreibe die Gruppe, ihre Aktivitäten und Ziele." %}</p>
		            </div><!-- col -->
		        </div><!-- row -->
	
	    
	    </div>
	    
	    <button type="submit" class="btn btn-emphasized">
	        <ul class="media-list">
	            <li class="media">
	                <a class="pull-left" href="#">
	                    <i class="fa fa-check"></i>
	                </a>
	                <div class="media-body">
                        {% trans "Speichern" %}
	                </div>
	            </li>
	        </ul>
	    </button>
    
    
    </form>
    

{% endblock %}



