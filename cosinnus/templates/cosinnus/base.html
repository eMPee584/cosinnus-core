{% load static from staticfiles %}
{% load bootstrap3 %}
{% load cosinnus_tags %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- TODO: override main title that can be extended from (in main app!) -->
        <title>{% block page_title %}{% endblock page_title %}</title>
        <!-- TODO: Favicon -->
        
        {% block csshead %}
	    <link href="{% static 'css/bootstrap3-cosinnus.css' %}" rel="stylesheet">
        <link href="{% static 'css/vendor/font-awesome.min.css' %}" rel="stylesheet">
        <link href="{% static 'css/vendor/select2.css' %}" rel="stylesheet">
        <link href="{% static 'css/vendor/fullcalendar.css' %}" rel="stylesheet">
        <link href="{% static 'css/cosinnus.css' %}" rel="stylesheet">
	    {% endblock csshead %}
        
        <script type="text/javascript">
            var cosinnus_base_url = "{{ COSINNUS_BASE_URL|default:'/' }}";
            var cosinnus_active_group = {% if group %}"{{ group.slug }}"{% else %}false{% endif %};
            var cosinnus_active_user = JSON.parse("{{ COSINNUS_USER|escapejs }}");
            var cosinnus_date_format = "{{ COSINNUS_DATE_FORMAT }}";
            var cosinnus_datetime_format = "{{ COSINNUS_DATETIME_FORMAT }}";
            var cosinnus_time_format = "{{ COSINNUS_TIME_FORMAT }}";
        </script>
        
        <script src="{% static 'js/vendor/jquery-2.1.0.min.js' %}"></script>
        <script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/vendor/select2.min.js' %}"></script>
        <script src="{% static 'js/vendor/fullcalendar.min.js' %}"></script>
        <script src="{% static 'js/vendor/jquery.sortElements.js' %}"></script>
        <script src="{% static 'js/vendor/moment-with-langs.min.js' %}"></script>
        <script src="{% static 'js/cosinnus.js' %}"></script>
        
        {% captureas cosinnus_css_class %}{% if COSINNUS_CURRENT_APP == 'todo' %}todos{% elif COSINNUS_CURRENT_APP == 'file' %}files{% elif COSINNUS_CURRENT_APP == 'event' %}calendar{% elif COSINNUS_CURRENT_APP %}{{ COSINNUS_CURRENT_APP }}{% else %}main{% endif %}{% endcaptureas %}
        
        {% include 'cosinnus/extrahead.html' %}
        {% block extrahead %}{% endblock extrahead %}
        
    </head>
    <body>
    <!-- class="{{ COSINNUS_CURRENT_APP }}" -->
    
        {% cosinnus_menu "cosinnus/navbar.html" %}
        
        <div class="container app-{{ cosinnus_css_class }}">
            <div class="row">
            
                {% block main_page %}
                <!-- start with left navigation -->
                <div class="col-lg-3 col-md-3"><!-- left column -->
                    {% if group %}
                        {% cosinnus_menu "cosinnus/appsmenu.html" %}
				    {% endif %}
				    {% block leftnav %}{% endblock leftnav %}
                </div><!-- left column -->
                
                <!-- now the content -->
                <div class="col-lg-9 col-md-9"><!-- right column -->
                    
                    <ol class="breadcrumb">
	                    {% block breadcrumb %}
		                    {% include 'cosinnus/breadcrumb.html' %}
	                    {% endblock breadcrumb %}
                    </ol>
                    
                    <div class="row">
                        <div class="col-xs-12">
                            {% bootstrap_messages %}
							{% block content %}{% endblock content %}
                        </div><!-- col -->
                    </div><!-- row -->
                </div><!-- right column -->
                {% endblock main_page %}
                
            </div><!-- row -->
        </div><!-- main container -->
        
    {% block extrafooter %}{% endblock extrafooter %}
    
  </body>
</html>
